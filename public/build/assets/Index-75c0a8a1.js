import{r as p,y as n,j as e}from"./app-eb4ac14d.js";import{P as D,d as f,B as A,I as o}from"./PanelLayout-9db7ade9.js";import{u as z,M as I}from"./index.esm-c4a53501.js";import{M as _}from"./index.esm-4bae7fd4.js";import{B as m}from"./Button-7f8b9a63.js";import{A as q}from"./Add-2196dc47.js";import{A as M}from"./ArrowBack-7bd27efd.js";import{D as T,a as P,b as Y}from"./DialogContent-a8b90f31.js";import{D as K}from"./DialogTitle-7e680bb7.js";import{T as s}from"./TableRow-9f6508f6.js";import{V as B}from"./Visibility-c9cb56b1.js";import{E as R}from"./Edit-9517b33c.js";import{P as x,S as g}from"./Stop-896da979.js";import{a as h,C as E}from"./CheckCircle-ccf21a3f.js";import{C as F}from"./Chip-bb44338a.js";import"./createSvgIcon-4d9a41bc.js";import"./index-cf4ee6ec.js";import"./Dropdown-8c28aa27.js";import"./transition-a13fe195.js";import"./Cancel-8205af54.js";import"./Edit-17e2fc58.js";import"./TextField-22f70a44.js";import"./MenuItem-3d0941cb.js";import"./DatePicker-25bc8498.js";import"./Popper-1f680820.js";import"./LastPage-4e97b798.js";import"./SwitchBase-3ba62cb7.js";import"./Checkbox-ae5cc143.js";import"./Stack-ebf23453.js";import"./CircularProgress-c9ab41e4.js";import"./Switch-31212aee.js";import"./Autocomplete-7942bf2c.js";const Ce=({auth:t,inventaires:l,departements:H,success:j,error:v})=>{const[C,c]=p.useState(!1),[u,y]=p.useState({action:"",id:null,message:""}),b=i=>{let r="default",a=null;switch(i){case"planifié":r="info",a=e.jsx(E,{fontSize:"small"});break;case"en_cours":r="warning",a=e.jsx(x,{fontSize:"small"});break;case"terminé":r="success",a=e.jsx(g,{fontSize:"small"});break;case"annulé":r="error",a=e.jsx(h,{fontSize:"small"});break;default:r="default"}return e.jsx(F,{label:i.charAt(0).toUpperCase()+i.slice(1),color:r,size:"small",icon:a})},d=(i,r,a)=>{y({action:i,id:r,message:a}),c(!0)},k=()=>{const{action:i,id:r}=u;switch(i){case"demarrer":n.get(route("admin.inventaire.physique.demarrer",[t.user.id,r]));break;case"terminer":n.get(route("admin.inventaire.physique.terminer",[t.user.id,r]));break;case"annuler":n.get(route("admin.inventaire.physique.annuler",[t.user.id,r]));break}c(!1)},S=z({columns:[{accessorKey:"id",header:"ID",size:80},{accessorKey:"date_debut",header:"Date de début",Cell:({row:i})=>f(i.original.date_debut).format("DD/MM/YYYY HH:mm")},{accessorKey:"date_fin",header:"Date de fin",Cell:({row:i})=>i.original.date_fin?f(i.original.date_fin).format("DD/MM/YYYY HH:mm"):"-"},{accessorKey:"departement.nom",header:"Département",Cell:({row:i})=>i.original.departement?i.original.departement.nom:"Tous les départements"},{accessorKey:"status",header:"Statut",Cell:({row:i})=>b(i.original.status)},{accessorKey:"user.name",header:"Créé par",Cell:({row:i})=>`${i.original.user.prenom} ${i.original.user.nom}`},{accessorKey:"actions",header:"Actions",Cell:({row:i})=>e.jsxs(A,{sx:{display:"flex",gap:"8px"},children:[e.jsx(s,{title:"Voir les détails",children:e.jsx(o,{color:"primary",onClick:()=>n.get(route("admin.inventaire.physique.show",[t.user.id,i.original.id])),children:e.jsx(B,{fontSize:"small"})})}),i.original.status==="planifié"&&e.jsxs(e.Fragment,{children:[e.jsx(s,{title:"Modifier",children:e.jsx(o,{color:"info",onClick:()=>n.get(route("admin.inventaire.physique.edit",[t.user.id,i.original.id])),children:e.jsx(R,{fontSize:"small"})})}),e.jsx(s,{title:"Démarrer l'inventaire",children:e.jsx(o,{color:"success",onClick:()=>d("demarrer",i.original.id,"Êtes-vous sûr de vouloir démarrer cet inventaire ?"),children:e.jsx(x,{fontSize:"small"})})}),e.jsx(s,{title:"Annuler l'inventaire",children:e.jsx(o,{color:"error",onClick:()=>d("annuler",i.original.id,"Êtes-vous sûr de vouloir annuler cet inventaire ?"),children:e.jsx(h,{fontSize:"small"})})})]}),i.original.status==="en_cours"&&e.jsx(s,{title:"Terminer l'inventaire",children:e.jsx(o,{color:"warning",onClick:()=>d("terminer",i.original.id,"Êtes-vous sûr de vouloir terminer cet inventaire ?"),children:e.jsx(g,{fontSize:"small"})})})]})}],data:l.data,enableColumnFilters:!0,enableGlobalFilter:!0,enablePagination:!0,manualPagination:!0,rowCount:l.total,onPaginationChange:i=>{n.get(route("admin.inventaire.physique.index",t.user.id),{page:i.pageIndex+1},{preserveState:!0,preserveScroll:!0,only:["inventaires"]})},state:{pagination:{pageIndex:l.current_page-1,pageSize:l.per_page}},localization:_,renderTopToolbarCustomActions:()=>e.jsx(m,{variant:"contained",color:"primary",startIcon:e.jsx(q,{}),onClick:()=>n.get(route("admin.inventaire.physique.create",t.user.id)),children:"Nouvel inventaire"})});return e.jsx(D,{auth:t,success:j,error:v,active:"stock",sousActive:"inventaire",breadcrumbs:[{text:"Inventaire",href:route("admin.stock.inventaire.index",[t.user.id]),active:!1},{text:"Inventaire Physique",href:route("admin.inventaire.physique.index",[t.user.id]),active:!0}],children:e.jsxs("div",{className:"p-4 bg-white rounded shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Inventaires Physiques"}),e.jsx(m,{variant:"outlined",startIcon:e.jsx(M,{}),onClick:()=>n.get(route("admin.stock.inventaire.index",t.user.id)),children:"Retour à la liste des inventaires"})]}),e.jsx(I,{table:S}),e.jsxs(T,{open:C,onClose:()=>c(!1),children:[e.jsx(K,{children:"Confirmation"}),e.jsx(P,{children:u.message}),e.jsxs(Y,{children:[e.jsx(m,{onClick:()=>c(!1),color:"error",children:"Annuler"}),e.jsx(m,{onClick:k,color:"primary",variant:"contained",children:"Confirmer"})]})]})]})})};export{Ce as default};
