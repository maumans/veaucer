import{W as B,j as e}from"./app-80aef6d5.js";import"./Dropdown-7e91de2b.js";import{I as p}from"./InputError-be802d9f.js";import{P as S,S as g}from"./PanelLayout-a81f80b5.js";import{T as u}from"./TextField-f4478316.js";import{C as E}from"./Checkbox-b8c9b3ff.js";import{B as I}from"./Button-1a27d212.js";import"./transition-c702c485.js";import"./createSvgIcon-f9f11e70.js";import"./index-bfd76f8c.js";import"./SwitchBase-5ee4a60b.js";function H({auth:o,role:l,error:i,errors:c,success:a,permissions:f,total:j,actif:b,inactif:v}){const{data:t,setData:d,post:W,put:N,reset:C}=B({id:l.id,slug:l.slug,name:l.name,libelle:l.libelle,permissions:[]}),m=s=>{s.target.type==="checkbox"?d(s.target.name,s.target.checked):d(s.target.name,s.target.value)},w=s=>{d("permissions",[...t.permissions.filter(r=>r.id!==s.target.name),{id:s.target.name,status:s.target.checked}])},x=()=>{N(route("role.update",l.id),{onSuccess:()=>{C()}})};return e.jsxs(S,{auth:o,success:a,error:i,active:"role",breadcrumbs:[{text:"Role",href:route("role.index"),active:!1},{text:"Modification",href:route("role.edit",[o.user.id]),active:!0}],children:[e.jsxs("div",{className:"grid gap-2 w-full mb-20",children:[e.jsx("div",{className:"flex gap-2",children:e.jsx("div",{className:"w-full flex lg:hidden primaryBgColor p-1 font-bold text-white rounded",children:"Gestion des roles"})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 w-full",children:[e.jsxs("div",{className:"primaryBgColor text-white p-2 rounded",children:[e.jsx("div",{className:"text-3xl font-bold",children:j}),e.jsx("div",{children:"roles"})]}),e.jsxs("div",{className:"secondaryBgColor text-white p-2 rounded",children:[e.jsx("div",{className:"text-3xl font-bold",children:b}),e.jsx("div",{children:"Actifs"})]}),e.jsxs("div",{className:"bg-red-500 text-white p-2 rounded",children:[e.jsx("div",{className:"text-3xl font-bold",children:v}),e.jsx("div",{children:"Inactifs"})]})]}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"grid sm:grid-cols-2 grid-cols-1 bg-gray-50 gap-5 p-2 rounded",children:[e.jsxs("div",{children:[e.jsx(u,{value:t.name,autoFocus:!0,id:"name",name:"name",label:"Nom",className:"bg-white",fullWidth:!0,onChange:m}),e.jsx(p,{message:c.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(u,{value:t.libelle,id:"libelle",name:"libelle",label:"Libellé",className:"bg-white",fullWidth:!0,onChange:m}),e.jsx(p,{message:c.libelle,className:"mt-2"})]})]}),e.jsxs("div",{className:"bg-white mt-10",children:[e.jsx("div",{className:"flex p-2 rounded font-bold text-xl",children:"Sélectionnez les permissions"}),e.jsx("div",{className:"flex gap-10 flex-wrap p-2 rounded",children:f.map((s,r)=>{var h;return e.jsxs("div",{className:"grid gap-5",children:[e.jsx("div",{className:"capitalize font-bold primaryColor",children:s.groupe}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(h=s.liste)==null?void 0:h.map((n,k)=>e.jsxs("span",{className:"rounded border px-1",children:[e.jsx(E,{defaultChecked:!!l.permissions.find(y=>n.id===y.id),onClick:w,name:n.id+""})," ",n.libelle]},k))})]},r)})})]}),e.jsx("div",{className:"mt-5",children:e.jsx(I,{variant:"contained",color:"success",onClick:x,children:"Enregistrer"})})]})]}),a&&e.jsx(g,{success:a}),i&&e.jsx(g,{error:i})]})}export{H as default};
