import{r as t,W as ce,j as e,y as de}from"./app-ef847769.js";import"./PanelLayout-f3b1b528.js";import{R as ue}from"./ReferentielLayout-6a75ad16.js";import{u as me,M as pe}from"./index.esm-f651ad8d.js";import{M as ge}from"./index.esm-4bae7fd4.js";import{I as m}from"./InputError-101e4114.js";import{B as a}from"./Button-5cd339f2.js";import{V as he}from"./Visibility-4a9b5128.js";import{E as xe}from"./Edit-56c024d5.js";import{D as fe}from"./Delete-578fe21d.js";import{C as O}from"./Check-a16d6a02.js";import{A as je}from"./AddCircle-aaca1f2f.js";import{D as p,a as g,b as y}from"./DialogContent-21eccb4c.js";import{D as h}from"./DialogTitle-8810badb.js";import{T as x}from"./TextField-239b9d80.js";import{C as ve}from"./Close-a9dab803.js";import"./createSvgIcon-1d15f18d.js";import"./index-63345e99.js";import"./Dropdown-acf677e6.js";import"./transition-07c41afc.js";/* empty css            */import"./Search-3df2f34f.js";import"./Autocomplete-e3bbac74.js";import"./Popper-fafd03d0.js";import"./Chip-7ba2869a.js";import"./Cancel-055cb859.js";import"./Edit-ed1cfcc7.js";import"./TableRow-e01d0199.js";import"./MenuItem-7e314da3.js";import"./DatePicker-17c52b79.js";import"./LastPage-9a697fd0.js";import"./SwitchBase-300b33a4.js";import"./Checkbox-29e5b734.js";import"./Stack-d9f7e61f.js";import"./CircularProgress-9e4a82bd.js";import"./Switch-00012cca.js";function ts({auth:N,errors:r,referentiels:P,typeSouscripteurs:n,error:w,success:B}){const[L,A]=t.useState([]),[k,E]=t.useState(!1),[W,f]=t.useState(!1),[K,c]=t.useState(!1),[V,F]=t.useState(0),[j,_]=t.useState([]),[v,G]=t.useState(""),[C,U]=t.useState([]),[o,q]=t.useState({pageIndex:n.current_page-1,pageSize:n.per_page});t.useEffect(()=>{F(n.total),A(n.data),c(!1)},[n]),t.useEffect(()=>{c(!0),f(!0),axios.post(route("superAdmin.typeSouscripteur.paginationFiltre"),{start:o.pageIndex*o.pageSize,size:o.pageSize,filters:j??[],globalFilter:v??"",sorting:C??[]}).then(s=>{A(s.data.data),F(s.data.rowCount),f(!1),c(!1)}).catch(s=>{E(!0),console.error(w)}),E(!1),f(!1),c(!1)},[j,v,o.pageIndex,o.pageSize,C]);const{data:i,setData:l,post:H,put:J,reset:S}=ce({id:"",nom:"",slug:""}),[Q,d]=t.useState(!1),[X,b]=t.useState(!1),[Y,D]=t.useState(!1),[Z,z]=t.useState(!1),$=()=>{S(),d(!0)},I=()=>{d(!1)},R=()=>{b(!1)},ee=()=>{D(!1)},T=()=>{z(!1)},u=s=>{s.target.type==="checkbox"?l(s.target.name,s.target.checked):l(s.target.name,s.target.value)},se=()=>{H(route("superAdmin.typeSouscripteur.store"),{onSuccess:()=>{S(),d(!1)}})},te=s=>{l({id:s.id,nom:s.nom||"",slug:s.slug||""}),b(!0)},ae=s=>{l({id:s.id,nom:s.nom||"",slug:s.slug||""}),D(!0)},M=(s,le)=>{l({id:s,message:le}),z(!0)},ie=()=>{J(route("superAdmin.typeSouscripteur.update",i.id),{onSuccess:()=>{S(),b(!1)}})},oe=()=>{d(!1),de.delete(route("superAdmin.typeSouscripteur.destroy",{id:i.id}))},re=t.useMemo(()=>[{accessorKey:"nom",header:"Nom"},{accessorKey:"slug",header:"Slug"},{accessorKey:"status",header:"Status",Cell:({row:s})=>s.original.status?e.jsx("div",{className:"p-2 font-bold bg-green-500 text-white w-fit h-fit rounded",children:"Actif"}):e.jsx("div",{className:"p-2 font-bold bg-red-500 text-white w-fit h-fit rounded",children:"Inactif"})},{accessorKey:"action",header:"Action",Cell:({row:s})=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{onClick:()=>ae(s.original),variant:"contained",size:"small",color:"info",children:e.jsx(he,{})}),e.jsx(a,{onClick:()=>te(s.original),variant:"contained",size:"small",color:"secondary",children:e.jsx(xe,{})}),s.original.status?e.jsx(a,{onClick:()=>M(s.original.id,"delete"),variant:"contained",size:"small",color:"error",children:e.jsx(fe,{})}):e.jsx(a,{onClick:()=>M(s.original.id,"check"),variant:"contained",size:"small",color:"success",children:e.jsx(O,{})})]},s.original.id)}],[]),ne=me({columns:re,data:L,getRowId:s=>s.id,initialState:{showColumnFilters:!1},manualFiltering:!0,manualPagination:!0,manualSorting:!0,muiToolbarAlertBannerProps:k?{color:"error",children:"Error loading data"}:void 0,onColumnFiltersChange:_,onGlobalFilterChange:G,onPaginationChange:q,onSortingChange:U,rowCount:V,state:{columnFilters:j,globalFilter:v,isLoading:W,pagination:o,showAlertBanner:k,showProgressBars:K,sorting:C},localization:ge});return e.jsx(ue,{success:B,error:w,auth:N,errors:r,referentiels:P,referentiel:"Types produits",active:"referentiel",sousActive:"superAdmin.typeProduit.index",breadcrumbs:[{text:"Type produit",href:route("superAdmin.typeProduit.index",[N.user.id]),active:!1}],children:e.jsxs("div",{className:"grid gap-5 bg-gray-200 p-2 rounded border",children:[e.jsxs("div",{className:"flex justify-end",children:[e.jsxs(a,{color:"warning",variant:"contained",onClick:$,children:[e.jsx(je,{className:"mr-1"})," Ajout type de souscripteur"]}),e.jsxs(p,{open:Q,onClose:I,children:[e.jsx(h,{className:"bg-orange-600 text-white",children:"Ajout du type de souscripteur"}),e.jsx(g,{className:"space-y-5",children:e.jsxs("div",{className:"grid sm:grid-cols-2 grid-cols-1 bg-gray-50 gap-5 p-2 m-2 rounded",children:[e.jsxs("div",{children:[e.jsx(x,{value:i.nom,autoFocus:!0,id:"nom",name:"nom",label:"Nom",className:"bg-white",fullWidth:!0,onChange:u}),e.jsx(m,{message:r.nom,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(x,{value:i.slug,id:"slug",name:"slug",label:"Slug",className:"bg-white",fullWidth:!0,onChange:u}),e.jsx(m,{message:r.slug,className:"mt-2"})]})]})}),e.jsxs(y,{children:[e.jsx(a,{variant:"contained",color:"error",onClick:I,children:"Annuler"}),e.jsx(a,{variant:"contained",color:"success",onClick:se,children:"Enregistrer"})]})]}),e.jsxs(p,{open:X,onClose:R,children:[e.jsx(h,{className:"bg-orange-600 text-white",children:"Modification du type de souscripteur"}),e.jsx(g,{className:"space-y-5",children:e.jsxs("div",{className:"grid sm:grid-cols-2 grid-cols-1 bg-gray-50 gap-5 p-2 m-2 rounded",children:[e.jsxs("div",{children:[e.jsx(x,{value:i.nom,autoFocus:!0,id:"nom",name:"nom",label:"Nom",className:"bg-white",fullWidth:!0,onChange:u}),e.jsx(m,{message:r.nom,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(x,{value:i.slug,id:"slug",name:"slug",label:"Slug",className:"bg-white",fullWidth:!0,onChange:u}),e.jsx(m,{message:r.slug,className:"mt-2"})]})]})}),e.jsxs(y,{children:[e.jsx(a,{variant:"contained",color:"error",onClick:R,children:"Annuler"}),e.jsx(a,{variant:"contained",color:"success",onClick:ie,children:"Enregistrer"})]})]}),e.jsxs(p,{open:Y,onClose:ee,children:[e.jsx(h,{className:"bg-orange-600 text-white",children:"Details du type de souscripteur"}),e.jsx(g,{className:"space-y-5",children:e.jsxs("div",{className:"grid grid-cols-2 mt-5 divide-y divide-x border w-96 min-w-fi",children:[e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-bold py-2 px-2",children:"NOM"}),e.jsx("div",{className:"py-2 px-2",children:i.nom})]}),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-bold py-2 px-2",children:"SLUG"}),e.jsx("div",{className:"py-2 px-2",children:i.slug})]})]})})]}),e.jsxs(p,{open:Z,onClose:T,children:[e.jsx(h,{className:"bg-orange-600 text-white",children:"Suppression du type de souscripteur"}),e.jsx(g,{className:"space-y-5",children:e.jsxs("div",{className:"mt-5",children:[i.message==="delete"&&"Voulez-vous vraiment suspendre ce type de souscripteur",i.message==="check"&&"Voulez-vous vraiment d√©bloquer ce type de souscripteur"]})}),e.jsxs(y,{children:[e.jsxs(a,{variant:"contained",color:"error",onClick:T,children:[e.jsx(ve,{}),"  Non"]}),e.jsxs(a,{variant:"contained",color:"success",onClick:oe,children:[e.jsx(O,{})," Oui"]})]})]})]}),e.jsx(pe,{table:ne})]})})}export{ts as default};
