import{R as w,j as e,y as u}from"./app-ef847769.js";import{d as q,T as r,P as D,a as h,B as S,D as F}from"./PanelLayout-f3b1b528.js";import{u as P,M as T}from"./index.esm-f651ad8d.js";import{M as R}from"./index.esm-4bae7fd4.js";import{C as N}from"./Chip-7ba2869a.js";import{B as v}from"./Button-5cd339f2.js";import{E as G}from"./Edit-56c024d5.js";import{A as z}from"./ArrowBack-609c6f32.js";import{e as j,f as b,d as p,c as o,b as t,g as M}from"./TableRow-e01d0199.js";import"./createSvgIcon-1d15f18d.js";import"./index-63345e99.js";import"./Dropdown-acf677e6.js";import"./transition-07c41afc.js";import"./Cancel-055cb859.js";import"./Edit-ed1cfcc7.js";import"./TextField-239b9d80.js";import"./MenuItem-7e314da3.js";import"./DatePicker-17c52b79.js";import"./Popper-fafd03d0.js";import"./DialogContent-21eccb4c.js";import"./LastPage-9a697fd0.js";import"./SwitchBase-300b33a4.js";import"./Checkbox-29e5b734.js";import"./Stack-d9f7e61f.js";import"./CircularProgress-9e4a82bd.js";import"./DialogTitle-8810badb.js";import"./Switch-00012cca.js";import"./Autocomplete-e3bbac74.js";function c(l){var x;let s=(x=l==null?void 0:l.toString())==null?void 0:x.replace(",",".");s=s.replace(/[^0-9.]/g,"");const d=parseFloat(s);return isNaN(d)?"":d.toLocaleString("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:20}).replace(",",".")}const de=({auth:l,produit:s,mouvements:d})=>{var g,f;const x=w.useMemo(()=>[{accessorKey:"date",header:"Date",Cell:({row:a})=>q(a.original.date).format("DD/MM/YYYY")},{accessorKey:"typeOperation.nom",header:"Type",Cell:({row:a})=>{var m;const i=(m=a.original.typeOperation)==null?void 0:m.nom;let n="default";switch(i){case"entrée":n="success";break;case"sortie":n="error";break;case"transfert":n="info";break;case"ajustement":n="warning";break;default:n="default"}return e.jsx(N,{label:i,color:n,size:"small"})}},{accessorKey:"quantite",header:"Quantité",Cell:({row:a})=>{var m;const i=a.original.quantite,n=(m=a.original.typeOperation)==null?void 0:m.nom;return e.jsxs(r,{color:n==="entrée"||n==="ajustement"&&i>0?"success.main":"error.main",fontWeight:"bold",children:[n==="entrée"||n==="ajustement"&&i>0?"+":"",c(i)]})}},{accessorKey:"prix",header:"Prix unitaire",Cell:({row:a})=>c(a.original.prix)+" GNF"},{accessorKey:"departementSource.nom",header:"Département source",Cell:({row:a})=>{var i;return((i=a.original.departementSource)==null?void 0:i.nom)||"-"}},{accessorKey:"departementDestination.nom",header:"Département destination",Cell:({row:a})=>{var i;return((i=a.original.departementDestination)==null?void 0:i.nom)||"-"}}],[]),y=P({columns:x,data:d.data||[],localization:R,enableColumnFilters:!0,enableGlobalFilter:!0,enablePagination:!0,manualPagination:!0,rowCount:d.total,onPaginationChange:a=>{u.get(route("admin.stock.produit.show",[l.user.id,s.id]),{page:a.pageIndex+1},{preserveState:!0,preserveScroll:!0,only:["mouvements"]})},state:{pagination:{pageIndex:d.current_page-1,pageSize:d.per_page}},initialState:{density:"compact"}}),k=()=>{u.get(route("admin.stock.produit.index",l.user.id))},C=()=>{u.get(route("admin.stock.produit.edit",[l.user.id,s.id]))};return e.jsx(D,{auth:l,active:"stock",sousActive:"produit",breadcrumbs:[{text:"Produits",href:route("admin.stock.produit.index",l.user.id),active:!1},{text:"Détail",href:route("admin.stock.produit.show",[l.user.id,s.id]),active:!0}],children:e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"p-5 bg-white rounded shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{className:"bg-black w-fit p-2 rounded text-xl font-bold text-white",children:e.jsx("h2",{children:"Détail du produit"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{variant:"contained",color:"primary",startIcon:e.jsx(G,{}),onClick:C,children:"Modifier"}),e.jsx(v,{variant:"outlined",startIcon:e.jsx(z,{}),onClick:k,children:"Retour à la liste"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(h,{elevation:3,className:"p-4",children:[e.jsx(r,{variant:"h6",className:"mb-3 text-orange-500 font-bold",children:"Informations générales"}),e.jsx(j,{children:e.jsx(b,{size:"small",children:e.jsxs(p,{children:[e.jsxs(o,{children:[e.jsx(t,{component:"th",className:"font-bold",width:"40%",children:"Nom"}),e.jsx(t,{children:s.nom})]}),e.jsxs(o,{children:[e.jsx(t,{component:"th",className:"font-bold",children:"Catégorie"}),e.jsx(t,{children:((g=s.categorie)==null?void 0:g.nom)||"-"})]}),e.jsxs(o,{children:[e.jsx(t,{component:"th",className:"font-bold",children:"Description"}),e.jsx(t,{children:s.description||"-"})]}),e.jsxs(o,{children:[e.jsx(t,{component:"th",className:"font-bold",children:"Fournisseur principal"}),e.jsx(t,{children:((f=s.fournisseurPrincipal)==null?void 0:f.nom)||"-"})]})]})})})]}),e.jsxs(h,{elevation:3,className:"p-4 flex flex-col justify-center items-center",children:[e.jsx(r,{variant:"h6",className:"mb-3 text-orange-500 font-bold self-start",children:"Image du produit"}),s.image?e.jsx("img",{src:`/storage/${s.image}`,alt:s.nom,className:"max-w-full max-h-48 object-contain"}):e.jsx(S,{className:"w-full h-48 bg-gray-200 flex justify-center items-center",children:e.jsx(r,{variant:"body2",color:"textSecondary",children:"Aucune image disponible"})})]}),e.jsxs(h,{elevation:3,className:"p-4 md:col-span-2",children:[e.jsx(r,{variant:"h6",className:"mb-3 text-orange-500 font-bold",children:"Informations de prix"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(j,{children:e.jsx(b,{size:"small",children:e.jsxs(p,{children:[e.jsxs(o,{children:[e.jsx(t,{component:"th",className:"font-bold",width:"40%",children:"Prix d'achat unitaire"}),e.jsxs(t,{children:[c(s.prixAchat)," GNF"]})]}),e.jsxs(o,{children:[e.jsx(t,{component:"th",className:"font-bold",children:"Prix de vente unitaire"}),e.jsxs(t,{children:[c(s.prixVente)," GNF"]})]})]})})}),e.jsx(j,{children:e.jsx(b,{size:"small",children:e.jsxs(p,{children:[e.jsxs(o,{children:[e.jsx(t,{component:"th",className:"font-bold",width:"40%",children:"Quantité par ensemble"}),e.jsx(t,{children:s.quantiteEnsemble?c(s.quantiteEnsemble):"-"})]}),e.jsxs(o,{children:[e.jsx(t,{component:"th",className:"font-bold",children:"Prix de vente par ensemble"}),e.jsx(t,{children:s.prixEnsemble?`${c(s.prixEnsemble)} GNF`:"-"})]})]})})})]})]}),e.jsxs(h,{elevation:3,className:"p-4 md:col-span-2",children:[e.jsx(r,{variant:"h6",className:"mb-3 text-orange-500 font-bold",children:"Informations de stock"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-100 p-4 rounded-lg text-center",children:[e.jsx(r,{variant:"subtitle2",className:"text-blue-800",children:"Stock global"}),e.jsx(r,{variant:"h4",className:"font-bold text-blue-800",children:c(s.stockGlobal)})]}),e.jsxs("div",{className:"bg-yellow-100 p-4 rounded-lg text-center",children:[e.jsx(r,{variant:"subtitle2",className:"text-yellow-800",children:"Stock critique"}),e.jsx(r,{variant:"h4",className:"font-bold text-yellow-800",children:c(s.stockCritique)})]}),e.jsxs("div",{className:`p-4 rounded-lg text-center ${s.stockGlobal<=s.stockCritique?"bg-red-100":"bg-green-100"}`,children:[e.jsx(r,{variant:"subtitle2",className:s.stockGlobal<=s.stockCritique?"text-red-800":"text-green-800",children:"Statut du stock"}),e.jsx(r,{variant:"h4",className:`font-bold ${s.stockGlobal<=s.stockCritique?"text-red-800":"text-green-800"}`,children:s.stockGlobal<=s.stockCritique?"Critique":"Normal"})]})]}),s.stocks&&s.stocks.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx(r,{variant:"subtitle1",className:"font-bold mb-2",children:"Détail par département"}),e.jsx(j,{children:e.jsxs(b,{size:"small",children:[e.jsx(M,{children:e.jsxs(o,{children:[e.jsx(t,{className:"font-bold",children:"Département"}),e.jsx(t,{className:"font-bold",children:"Quantité"}),e.jsx(t,{className:"font-bold",children:"Statut"})]})}),e.jsx(p,{children:s.stocks.map(a=>{var i;return e.jsxs(o,{children:[e.jsx(t,{children:((i=a.departement)==null?void 0:i.nom)||"Stock global"}),e.jsx(t,{children:c(a.quantite)}),e.jsx(t,{children:e.jsx(N,{label:a.quantite<=s.stockCritique?"Critique":"Normal",color:a.quantite<=s.stockCritique?"error":"success",size:"small"})})]},a.id)})})]})})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(F,{className:"mb-4"}),e.jsx(r,{variant:"h6",className:"mb-3 text-orange-500 font-bold",children:"Historique des mouvements"}),e.jsx(T,{table:y})]})]})})})};export{de as default};
