import{R as D,j as e,y as p}from"./app-4edf48e5.js";import{d as T,T as i,P,a as m,B as S,D as R}from"./PanelLayout-f2722d4d.js";import{u as z,M as G}from"./index.esm-9dae7fe5.js";import{M as I}from"./index.esm-4bae7fd4.js";import{f as o}from"./FormatNumber-8971c0bd.js";import{C as v}from"./Chip-0001e9bb.js";import{B as y}from"./Button-287e2751.js";import{E as M}from"./Edit-d3d63b61.js";import{A}from"./ArrowBack-568090f4.js";import{e as h,f as j,d as b,c as r,b as t,g as F}from"./TableRow-96be2280.js";import"./createSvgIcon-5bc31cb8.js";import"./index-17fa150b.js";import"./Dropdown-4c3aabf3.js";import"./transition-92123e1c.js";import"./Cancel-a6a6eef9.js";import"./Edit-fc260d54.js";import"./TextField-552e66ea.js";import"./MenuItem-b79354fa.js";import"./DatePicker-b73dcf77.js";import"./Popper-aabbbbc2.js";import"./DialogContent-8a1e29b1.js";import"./LastPage-76c05c1b.js";import"./SwitchBase-2ee5bbf3.js";import"./Checkbox-521167ff.js";import"./Stack-01e86631.js";import"./CircularProgress-210c747e.js";import"./DialogTitle-9058224f.js";import"./Switch-3b9ccd2c.js";import"./Autocomplete-296c4901.js";const he=({auth:c,produit:s,mouvements:x})=>{var u,f,g,N;const k=D.useMemo(()=>[{accessorKey:"date",header:"Date",Cell:({row:a})=>T(a.original.date).format("DD/MM/YYYY")},{accessorKey:"typeOperation.nom",header:"Type",Cell:({row:a})=>{var d;const n=(d=a.original.typeOperation)==null?void 0:d.nom;let l="default";switch(n){case"entrée":l="success";break;case"sortie":l="error";break;case"transfert":l="info";break;case"ajustement":l="warning";break;default:l="default"}return e.jsx(v,{label:n,color:l,size:"small"})}},{accessorKey:"quantite",header:"Quantité",Cell:({row:a})=>{var d;const n=a.original.quantite,l=(d=a.original.typeOperation)==null?void 0:d.nom;return e.jsxs(i,{color:l==="entrée"||l==="ajustement"&&n>0?"success.main":"error.main",fontWeight:"bold",children:[l==="entrée"||l==="ajustement"&&n>0?"+":"",o(n)]})}},{accessorKey:"prix_unitaire",header:"Prix unitaire",Cell:({row:a})=>o(a.original.prix_unitaire)+" GNF"},{accessorKey:"departementSource.nom",header:"Département source",Cell:({row:a})=>{var n;return((n=a.original.departementSource)==null?void 0:n.nom)||"-"}},{accessorKey:"departementDestination.nom",header:"Département destination",Cell:({row:a})=>{var n;return((n=a.original.departementDestination)==null?void 0:n.nom)||"-"}}],[]),C=z({columns:k,data:x.data||[],localization:I,enableColumnFilters:!0,enableGlobalFilter:!0,enablePagination:!0,manualPagination:!0,rowCount:x.total,onPaginationChange:a=>{p.get(route("admin.stock.produit.show",[c.user.id,s.id]),{page:a.pageIndex+1},{preserveState:!0,preserveScroll:!0,only:["mouvements"]})},state:{pagination:{pageIndex:x.current_page-1,pageSize:x.per_page}},initialState:{density:"compact"}}),w=()=>{p.get(route("admin.stock.produit.index",c.user.id))},q=()=>{p.get(route("admin.stock.produit.edit",[c.user.id,s.id]))};return e.jsx(P,{auth:c,active:"stock",sousActive:"produit",breadcrumbs:[{text:"Produits",href:route("admin.stock.produit.index",c.user.id),active:!1},{text:"Détail",href:route("admin.stock.produit.show",[c.user.id,s.id]),active:!0}],children:e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"p-5 bg-white rounded shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{className:"bg-black w-fit p-2 rounded text-xl font-bold text-white",children:e.jsx("h2",{children:"Détail du produit"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{variant:"contained",color:"primary",startIcon:e.jsx(M,{}),onClick:q,children:"Modifier"}),e.jsx(y,{variant:"outlined",startIcon:e.jsx(A,{}),onClick:w,children:"Retour à la liste"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(m,{elevation:3,className:"p-4",children:[e.jsx(i,{variant:"h6",className:"mb-3 text-orange-500 font-bold",children:"Informations générales"}),e.jsx(h,{children:e.jsx(j,{size:"small",children:e.jsxs(b,{children:[e.jsxs(r,{children:[e.jsx(t,{component:"th",className:"font-bold",width:"40%",children:"Nom"}),e.jsx(t,{children:s.nom})]}),e.jsxs(r,{children:[e.jsx(t,{component:"th",className:"font-bold",children:"Catégorie"}),e.jsx(t,{children:((u=s.categorie)==null?void 0:u.nom)||"-"})]}),e.jsxs(r,{children:[e.jsx(t,{component:"th",className:"font-bold",children:"Description"}),e.jsx(t,{children:s.description||"-"})]}),e.jsxs(r,{children:[e.jsx(t,{component:"th",className:"font-bold",children:"Fournisseur principal"}),e.jsx(t,{children:((f=s.fournisseurPrincipal)==null?void 0:f.nom)||"-"})]})]})})})]}),e.jsxs(m,{elevation:3,className:"p-4 flex flex-col justify-center items-center",children:[e.jsx(i,{variant:"h6",className:"mb-3 text-orange-500 font-bold self-start",children:"Image du produit"}),s.image?e.jsx("img",{src:`/storage/${s.image}`,alt:s.nom,className:"max-w-full max-h-48 object-contain"}):e.jsx(S,{className:"w-full h-48 bg-gray-200 flex justify-center items-center",children:e.jsx(i,{variant:"body2",color:"textSecondary",children:"Aucune image disponible"})})]}),e.jsxs(m,{elevation:3,className:"p-4",children:[e.jsx(i,{variant:"h6",className:"mb-3 text-orange-500 font-bold",children:"Informations d'achat"}),e.jsx(h,{children:e.jsx(j,{size:"small",children:e.jsxs(b,{children:[e.jsxs(r,{children:[e.jsx(t,{component:"th",className:"font-bold",width:"40%",children:"Type d'achat"}),e.jsx(t,{children:((g=s.typeProduitAchat)==null?void 0:g.nom)||"-"})]}),e.jsxs(r,{children:[e.jsx(t,{component:"th",className:"font-bold",children:"Quantité d'achat"}),e.jsx(t,{children:o(s.quantiteAchat)})]}),e.jsxs(r,{children:[e.jsx(t,{component:"th",className:"font-bold",children:"Prix d'achat"}),e.jsxs(t,{children:[o(s.prixAchat)," GNF"]})]})]})})})]}),e.jsxs(m,{elevation:3,className:"p-4",children:[e.jsx(i,{variant:"h6",className:"mb-3 text-orange-500 font-bold",children:"Informations de vente"}),e.jsx(h,{children:e.jsx(j,{size:"small",children:e.jsxs(b,{children:[e.jsxs(r,{children:[e.jsx(t,{component:"th",className:"font-bold",width:"40%",children:"Type de vente"}),e.jsx(t,{children:((N=s.typeProduitVente)==null?void 0:N.nom)||"-"})]}),e.jsxs(r,{children:[e.jsx(t,{component:"th",className:"font-bold",children:"Quantité de vente"}),e.jsx(t,{children:o(s.quantiteVente)})]}),e.jsxs(r,{children:[e.jsx(t,{component:"th",className:"font-bold",children:"Prix de vente"}),e.jsxs(t,{children:[o(s.prixVente)," GNF"]})]})]})})})]}),e.jsxs(m,{elevation:3,className:"p-4 md:col-span-2",children:[e.jsx(i,{variant:"h6",className:"mb-3 text-orange-500 font-bold",children:"Informations de stock"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-100 p-4 rounded-lg text-center",children:[e.jsx(i,{variant:"subtitle2",className:"text-blue-800",children:"Stock global"}),e.jsx(i,{variant:"h4",className:"font-bold text-blue-800",children:o(s.stockGlobal)})]}),e.jsxs("div",{className:"bg-yellow-100 p-4 rounded-lg text-center",children:[e.jsx(i,{variant:"subtitle2",className:"text-yellow-800",children:"Stock critique"}),e.jsx(i,{variant:"h4",className:"font-bold text-yellow-800",children:o(s.stockCritique)})]}),e.jsxs("div",{className:`p-4 rounded-lg text-center ${s.stockGlobal<=s.stockCritique?"bg-red-100":"bg-green-100"}`,children:[e.jsx(i,{variant:"subtitle2",className:s.stockGlobal<=s.stockCritique?"text-red-800":"text-green-800",children:"Statut du stock"}),e.jsx(i,{variant:"h4",className:`font-bold ${s.stockGlobal<=s.stockCritique?"text-red-800":"text-green-800"}`,children:s.stockGlobal<=s.stockCritique?"Critique":"Normal"})]})]}),s.stocks&&s.stocks.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx(i,{variant:"subtitle1",className:"font-bold mb-2",children:"Détail par département"}),e.jsx(h,{children:e.jsxs(j,{size:"small",children:[e.jsx(F,{children:e.jsxs(r,{children:[e.jsx(t,{className:"font-bold",children:"Département"}),e.jsx(t,{className:"font-bold",children:"Quantité"}),e.jsx(t,{className:"font-bold",children:"Statut"})]})}),e.jsx(b,{children:s.stocks.map(a=>{var n;return e.jsxs(r,{children:[e.jsx(t,{children:((n=a.departement)==null?void 0:n.nom)||"Stock global"}),e.jsx(t,{children:o(a.quantite)}),e.jsx(t,{children:e.jsx(v,{label:a.quantite<=s.stockCritique?"Critique":"Normal",color:a.quantite<=s.stockCritique?"error":"success",size:"small"})})]},a.id)})})]})})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(R,{className:"mb-4"}),e.jsx(i,{variant:"h6",className:"mb-3 text-orange-500 font-bold",children:"Historique des mouvements"}),e.jsx(G,{table:C})]})]})})})};export{he as default};
