import{W as k,r as v,j as e,y as V}from"./app-eb4ac14d.js";import{I as n}from"./InputError-72dd93fb.js";import{P as y}from"./PanelLayout-9db7ade9.js";/* empty css            */import p from"./NumberFormatCustomUtils-fb049ff7.js";import{f as P}from"./FormatNumber-307c2c1f.js";import{B as N}from"./Button-7f8b9a63.js";import{A as z}from"./ArrowBack-7bd27efd.js";import{m as I}from"./motion-9f56c363.js";import{T as l,a as E}from"./TextField-22f70a44.js";import{A as x}from"./Autocomplete-7942bf2c.js";import"./createSvgIcon-4d9a41bc.js";import"./index-cf4ee6ec.js";import"./Dropdown-8c28aa27.js";import"./transition-a13fe195.js";import"./Popper-1f680820.js";import"./Chip-bb44338a.js";function C(o){var r;const c=(r=o==null?void 0:o.toString())==null?void 0:r.replace(/\s/g,"").replace(/,/,".");return parseFloat(c)}function ae({auth:o,typeProduits:c,typeProduitAchat:r,typeProduitVente:u,categories:w,fournisseurs:O,devises:T,uniteMesures:S,errors:a,success:W,error:F,referentiels:G}){var g,f,j,b;const{data:s,setData:d,post:q,processing:L}=k({nom:"",prixAchat:"",prixVente:"",stockGlobal:"",stockCritique:"",typeProduitAchat:r,quantiteAchat:"",typeProduitVente:u,quantiteVente:"",categorie:null,fournisseur:null,uniteMesure:null,devise:null});v.useEffect(()=>{(r==null?void 0:r.nom)==="unité"&&d("quantiteAchat",1)},[r]),v.useEffect(()=>{(u==null?void 0:u.nom)==="unité"&&d("quantiteVente",1)},[u]);const m=t=>{t.target.type==="checkbox"?d(t.target.name,t.target.checked):d(t.target.name,t.target.value)},h=t=>{d(t.target.name,P(t.target.value))};function A(t){t.preventDefault(),q(route("admin.produit.store",o.user.id),{...s,quantiteAchat:C(s.quantiteAchat),quantiteVente:C(s.quantiteVente)},{preserveScroll:!0})}return e.jsx(y,{auth:o,active:"stock",sousActive:"produit",breadcrumbs:[{text:"Produit",href:route("admin.produit.index",o.user.id),active:!1},{text:"Création",href:route("admin.produit.create",[o.user.id]),active:!0}],children:e.jsx("div",{children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"p-4 bg-white rounded mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"bg-black w-fit p-2 rounded text-xl font-bold text-white",children:e.jsx("h2",{children:"Nouveau produit"})}),e.jsx(N,{variant:"outlined",startIcon:e.jsx(z,{}),onClick:()=>V.get(route("admin.produit.index",o.user.id)),children:"Retour à la liste"})]})}),e.jsx(I.div,{initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,type:"spring"},style:{width:"100%"},children:e.jsxs("form",{onSubmit:A,className:"w-full space-y-5 gap-5 rounded bg-white p-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 border p-3 rounded",children:[e.jsx("div",{className:"md:col-span-2 text-orange-500 font-bold",children:"Infos de base"}),e.jsxs("div",{children:[e.jsx(l,{value:s.nom,autoFocus:!0,id:"nom",name:"nom",label:"Nom",className:"bg-white",fullWidth:!0,onChange:m,size:"small"}),e.jsx(n,{message:a.nom,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(x,{className:"w-full",onChange:(t,i)=>d("categorie",i),disablePortal:!0,options:w,getOptionLabel:t=>t.libelle,isOptionEqualToValue:(t,i)=>t.id===i.id,renderInput:t=>e.jsx(l,{fullWidth:!0,...t,placeholder:"Categorie de produit",label:t.libelle,size:"small"})}),e.jsx(n,{message:a["data.categorie"]})]}),e.jsxs("div",{className:"md:col-span-2 mt-8",children:[e.jsx(E,{className:"w-full",name:"description",placeholder:"Description",style:{height:100},onChange:m,autoComplete:"description"}),e.jsx(n,{message:a["data.description"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 border p-3 rounded",children:[e.jsx("div",{className:"md:col-span-2 font-bold text-orange-500",children:"Options d'achat"}),e.jsxs("div",{children:[e.jsx(x,{value:s.typeProduitAchat,className:"w-full",onChange:(t,i)=>d("typeProduitAchat",i),disablePortal:!0,options:c,getOptionLabel:t=>t.nom,isOptionEqualToValue:(t,i)=>t.id===i.id,renderInput:t=>e.jsx(l,{fullWidth:!0,...t,placeholder:"Type de produit",label:t.nom,size:"small"})}),e.jsx(n,{message:a["data.typeProduitAchat"]})]}),((g=s.typeProduitAchat)==null?void 0:g.nom)==="ensemble"?e.jsxs("div",{children:[e.jsx(l,{value:s.quantiteAchat,id:"quantiteAchat",name:"quantiteAchat",label:"Quantité",className:"bg-white",fullWidth:!0,onChange:h,size:"small"}),e.jsx(n,{message:a.quantiteAchat,className:"mt-2"})]}):null,e.jsxs("div",{className:"w-full",children:[e.jsx(l,{InputProps:{inputComponent:p,endAdornment:"GNF",inputProps:{max:1e11,min:-1e12,name:"prixAchat"}},className:"w-full",label:`Prix d'achat ${((f=s.typeProduitAchat)==null?void 0:f.nom)==="unité"?"unitaire":"total"}`,name:"prixAchat",onChange:m,size:"small"}),e.jsx(n,{message:a.prixAchat})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 border p-3 rounded",children:[e.jsx("div",{className:"md:col-span-2 font-bold text-orange-500",children:"Options de vente"}),e.jsxs("div",{children:[e.jsx(x,{value:s.typeProduitVente,className:"w-full",onChange:(t,i)=>d("typeProduitVente",i),disablePortal:!0,options:c,getOptionLabel:t=>t.nom,isOptionEqualToValue:(t,i)=>t.id===i.id,renderInput:t=>e.jsx(l,{fullWidth:!0,...t,placeholder:"Type de produit",label:t.nom,size:"small"})}),e.jsx(n,{message:a["data.typeProduitVente"]})]}),((j=s.typeProduitVente)==null?void 0:j.nom)==="ensemble"?e.jsxs("div",{children:[e.jsx(l,{value:s.quantiteVente,id:"quantiteVente",name:"quantiteVente",label:"Quantité",className:"bg-white",fullWidth:!0,onChange:h,size:"small"}),e.jsx(n,{message:a.quantiteVente,className:"mt-2"})]}):null,e.jsxs("div",{className:"w-full",children:[e.jsx(l,{InputProps:{inputComponent:p,endAdornment:"GNF",inputProps:{max:1e11,min:-1e12,name:"prixVente"}},className:"w-full",label:`Prix de vente ${((b=s.typeProduitVente)==null?void 0:b.nom)==="unité"?"unitaire":"total"}`,name:"prixVente",onChange:m,size:"small"}),e.jsx(n,{message:a.prixVente})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 border p-3 rounded",children:[e.jsx("div",{className:"md:col-span-2 font-bold text-orange-500",children:"Stock principal"}),e.jsxs("div",{className:"w-full",children:[e.jsx(l,{InputProps:{inputComponent:p,inputProps:{max:1e11,min:-1e12,name:"stockGlobal"}},className:"w-full",label:"Stock global",name:"stockGlobal",onChange:m,size:"small"}),e.jsx(n,{message:a.stockGlobal})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(l,{InputProps:{inputComponent:p,inputProps:{max:1e11,min:-1e12,name:"stockCritique"}},className:"w-full",label:"Stock critique",name:"stockCritique",onChange:m,size:"small"}),e.jsx(n,{message:a.stockCritique})]})]}),e.jsx("div",{className:"w-full md:col-span-2 flex gap-2 justify-end",children:e.jsx(N,{variant:"contained",color:"success",type:"submit",size:"small",children:"Valider"})})]})})]})})})}export{ae as default};
