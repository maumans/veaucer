import{r as i,W as he,j as e,y as xe}from"./app-2375f243.js";import"./PanelLayout-e7050e06.js";import{R as pe}from"./ReferentielLayout-7339f89f.js";import{u as je,D as x,a as p,b as j,F as M,S as P,c as y,C as fe,M as be}from"./index.esm-24e1cabb.js";import{V as ve,E as Ne,D as Ce,C as L,A as Se,M as ye}from"./index.esm-858d862c.js";import{I as n}from"./InputError-68d6cb0c.js";import{B as o}from"./Button-360edc97.js";import{T as c,A as V}from"./TextField-5b383e78.js";import"./createSvgIcon-ab9be74c.js";import"./index-c926b602.js";import"./Dropdown-1ce9c365.js";import"./transition-d812106d.js";/* empty css            */import"./Search-d7112b9b.js";function Me({auth:w,errors:l,referentiels:G,actes:m,garanties:A,error:E,success:K}){var T;const[B,F]=i.useState([]),[k,q]=i.useState(!1),[_,f]=i.useState(!1),[U,g]=i.useState(!1),[H,J]=i.useState(0),[b,Q]=i.useState([]),[v,X]=i.useState(""),[N,Y]=i.useState([]),[u,Z]=i.useState({pageIndex:m.current_page-1,pageSize:m.per_page});i.useEffect(()=>{J(m.total),F(m.data),g(!1)},[m]),i.useEffect(()=>{g(!0),f(!0),axios.post(route("superAdmin.acte.paginationFiltre"),{start:u.pageIndex*u.pageSize,size:u.pageSize,filters:b??[],globalFilter:v??"",sorting:N??[]}).then(s=>{F(s.data.data),J(s.data.rowCount),f(!1),g(!1)}).catch(s=>{q(!0),console.error(E)}),q(!1),f(!1),g(!1)},[b,v,u.pageIndex,u.pageSize,N]);const{data:a,setData:d,post:$,put:ee,reset:C}=he({id:"",nom:"",code:"",validiteSpecifique:!1,nombreJours:"",slug:"",garantie:null}),[se,h]=i.useState(!1),[ae,S]=i.useState(!1),[ie,D]=i.useState(!1),[le,I]=i.useState(!1),te=()=>{C(),h(!0)},O=()=>{h(!1)},R=()=>{S(!1)},ne=()=>{D(!1)},z=()=>{I(!1)},r=s=>{s.target.type==="checkbox"?d(s.target.name,s.target.checked):d(s.target.name,s.target.value)},oe=()=>{$(route("superAdmin.acte.store"),{onSuccess:()=>{C(),h(!1)}})},re=s=>{d({id:s.id,nom:s.nom||"",code:s.code||"",validiteSpecifique:!!s.validiteSpecifique||!1,nombreJours:s.nombreJours||"",slug:s.slug||"",garantie:s.garantie||null}),S(!0)},ce=s=>{d({id:s.id,nom:s.nom||"",code:s.code||"",validiteSpecifique:!!s.validiteSpecifique||!1,nombreJours:s.nombreJours||"",slug:s.slug||"",garantie:s.garantie||null}),D(!0)},W=(s,t)=>{d({id:s,message:t}),I(!0)},de=()=>{ee(route("superAdmin.acte.update",a.id),{onSuccess:()=>{C(),S(!1)}})},ue=()=>{h(!1),xe.delete(route("superAdmin.acte.destroy",{id:a.id}))},me=i.useMemo(()=>[{accessorKey:"nom",header:"Nom"},{accessorKey:"code",header:"Code"},{accessorKey:"slug",header:"Slug"},{accessorKey:"nombreJours",header:"Nombre de jours"},{accessorKey:"garantie",header:"Garantie",Cell:({row:s})=>{var t;return(t=s.original.garantie)==null?void 0:t.libelle}},{accessorKey:"status",header:"Status",Cell:({row:s})=>s.original.status?e.jsx("div",{className:"p-2 font-bold bg-green-500 text-white w-fit h-fit rounded",children:"Actif"}):e.jsx("div",{className:"p-2 font-bold bg-red-500 text-white w-fit h-fit rounded",children:"Inactif"})},{accessorKey:"action",header:"Action",Cell:({row:s})=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{onClick:()=>ce(s.original),variant:"contained",size:"small",color:"info",children:e.jsx(ve,{})}),e.jsx(o,{onClick:()=>re(s.original),variant:"contained",size:"small",color:"secondary",children:e.jsx(Ne,{})}),s.original.status?e.jsx(o,{onClick:()=>W(s.original.id,"delete"),variant:"contained",size:"small",color:"error",children:e.jsx(Ce,{})}):e.jsx(o,{onClick:()=>W(s.original.id,"check"),variant:"contained",size:"small",color:"success",children:e.jsx(L,{})})]},s.original.id)}],[]),ge=je({columns:me,data:B,getRowId:s=>s.id,initialState:{showColumnFilters:!1},manualFiltering:!0,manualPagination:!0,manualSorting:!0,muiToolbarAlertBannerProps:k?{color:"error",children:"Error loading data"}:void 0,onColumnFiltersChange:Q,onGlobalFilterChange:X,onPaginationChange:Z,onSortingChange:Y,rowCount:H,state:{columnFilters:b,globalFilter:v,isLoading:_,pagination:u,showAlertBanner:k,showProgressBars:U,sorting:N},localization:ye});return e.jsx(pe,{success:K,error:E,auth:w,errors:l,referentiels:G,referentiel:"Actes",active:"referentiel",sousActive:"superAdmin.acte.index",breadcrumbs:[{text:"Acte",href:route("superAdmin.acte.index",[w.user.id]),active:!1}],children:e.jsxs("div",{className:"grid gap-5 bg-gray-200 p-2 rounded border",children:[e.jsxs("div",{className:"flex justify-end",children:[e.jsxs(o,{color:"warning",variant:"contained",onClick:te,children:[e.jsx(Se,{className:"mr-1"})," Ajout acte"]}),e.jsxs(x,{open:se,onClose:O,children:[e.jsx(p,{className:"bg-orange-600 text-white",children:"Ajout de l'acte"}),e.jsx(j,{className:"space-y-5",children:e.jsxs("div",{className:"grid sm:grid-cols-2 grid-cols-1 bg-gray-50 gap-5 p-2 m-2 rounded",children:[e.jsxs("div",{children:[e.jsx(c,{value:a.nom,autoFocus:!0,id:"nom",name:"nom",label:"Nom",className:"bg-white",fullWidth:!0,onChange:r}),e.jsx(n,{message:l.nom,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{value:a.code,id:"code",name:"code",label:"Code",className:"bg-white",fullWidth:!0,onChange:r}),e.jsx(n,{message:l.code,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{value:a.slug,id:"slug",name:"slug",label:"Slug",className:"bg-white",fullWidth:!0,onChange:r}),e.jsx(n,{message:l.slug,className:"mt-2"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(V,{className:"w-full",onChange:(s,t)=>d("garantie",t),disablePortal:!0,options:A,getOptionLabel:s=>s.libelle,isOptionEqualToValue:(s,t)=>s.id===t.id,renderInput:s=>e.jsx(c,{fullWidth:!0,...s,placeholder:"Garantie",label:s.libelle})}),e.jsx(n,{message:l["data.garantie"]})]}),e.jsxs("div",{className:"flex flex-col justify-center border p-2 rounded bg-white",children:[e.jsx(M,{control:e.jsx(P,{checked:a.validiteSpecifique,onChange:r,inputProps:{"aria-label":"controlled"},name:"validiteSpecifique"}),label:"Validité spécifique"}),e.jsx(n,{message:l.validiteSpecifique,className:"mt-2"})]}),a.validiteSpecifique&&e.jsxs("div",{children:[e.jsx(c,{value:a.nombreJours,id:"nombreJours",name:"nombreJours",label:"Nombre de jours",className:"bg-white",fullWidth:!0,onChange:r}),e.jsx(n,{message:l.nombreJours,className:"mt-2"})]})]})}),e.jsxs(y,{children:[e.jsx(o,{variant:"contained",color:"error",onClick:O,children:"Annuler"}),e.jsx(o,{variant:"contained",color:"success",onClick:oe,children:"Enregistrer"})]})]}),e.jsxs(x,{open:ae,onClose:R,children:[e.jsx(p,{className:"bg-orange-600 text-white",children:"Modification de l'acte"}),e.jsx(j,{className:"space-y-5",children:e.jsxs("div",{className:"grid sm:grid-cols-2 grid-cols-1 bg-gray-50 gap-5 p-2 m-2 rounded",children:[e.jsxs("div",{children:[e.jsx(c,{value:a.nom,autoFocus:!0,id:"nom",name:"nom",label:"Nom",className:"bg-white",fullWidth:!0,onChange:r}),e.jsx(n,{message:l.nom,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{value:a.code,id:"code",name:"code",label:"Code",className:"bg-white",fullWidth:!0,onChange:r}),e.jsx(n,{message:l.code,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{value:a.slug,id:"slug",name:"slug",label:"Slug",className:"bg-white",fullWidth:!0,onChange:r}),e.jsx(n,{message:l.slug,className:"mt-2"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(V,{value:a.garantie,className:"w-full",onChange:(s,t)=>d("garantie",t),disablePortal:!0,options:A,getOptionLabel:s=>s.libelle,isOptionEqualToValue:(s,t)=>s.id===t.id,renderInput:s=>e.jsx(c,{fullWidth:!0,...s,placeholder:"Garantie",label:s.libelle})}),e.jsx(n,{message:l["data.garantie"]})]}),e.jsxs("div",{className:"flex flex-col justify-center border p-2 rounded bg-white",children:[e.jsx(M,{control:e.jsx(P,{checked:a.validiteSpecifique,onChange:r,inputProps:{"aria-label":"controlled"},name:"validiteSpecifique"}),label:"Validité spécifique"}),e.jsx(n,{message:l.validiteSpecifique,className:"mt-2"})]}),a.validiteSpecifique&&e.jsxs("div",{children:[e.jsx(c,{value:a.nombreJours,id:"nombreJours",name:"nombreJours",label:"Nombre de jours",className:"bg-white",fullWidth:!0,onChange:r}),e.jsx(n,{message:l.nombreJours,className:"mt-2"})]})]})}),e.jsxs(y,{children:[e.jsx(o,{variant:"contained",color:"error",onClick:R,children:"Annuler"}),e.jsx(o,{variant:"contained",color:"success",onClick:de,children:"Enregistrer"})]})]}),e.jsxs(x,{open:ie,onClose:ne,children:[e.jsx(p,{className:"bg-orange-600 text-white",children:"Details de l'acte"}),e.jsx(j,{className:"space-y-5",children:e.jsxs("div",{className:"grid grid-cols-2 mt-5 divide-y divide-x border w-96 min-w-fi",children:[e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-bold py-2 px-2",children:"NOM"}),e.jsx("div",{className:"py-2 px-2",children:a.nom})]}),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-bold py-2 px-2",children:"CODE"}),e.jsx("div",{className:"py-2 px-2",children:a.code})]}),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-bold py-2 px-2",children:"SLUG"}),e.jsx("div",{className:"py-2 px-2",children:a.slug})]}),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-bold py-2 px-2",children:"GARANTIE"}),e.jsx("div",{className:"py-2 px-2",children:(T=a.garantie)==null?void 0:T.libelle})]}),a.nombreJours&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-bold py-2 px-2",children:"NOMBRE DE JOURS"}),e.jsx("div",{className:"py-2 px-2",children:a.nombreJours})]})]})})]}),e.jsxs(x,{open:le,onClose:z,children:[e.jsx(p,{className:"bg-orange-600 text-white",children:"Suppression du acte"}),e.jsx(j,{className:"space-y-5",children:e.jsxs("div",{className:"mt-5",children:[a.message==="delete"&&"Voulez-vous vraiment suspendre cet acte",a.message==="check"&&"Voulez-vous vraiment débloquer cet acte"]})}),e.jsxs(y,{children:[e.jsxs(o,{variant:"contained",color:"error",onClick:z,children:[e.jsx(fe,{}),"  Non"]}),e.jsxs(o,{variant:"contained",color:"success",onClick:ue,children:[e.jsx(L,{})," Oui"]})]})]})]}),e.jsx(be,{table:ge})]})})}export{Me as default};
