import{r as p,y as n,j as e}from"./app-4edf48e5.js";import{P as D,d as f,B as A,I as o}from"./PanelLayout-f2722d4d.js";import{u as z,M as I}from"./index.esm-9dae7fe5.js";import{M as _}from"./index.esm-4bae7fd4.js";import{B as m}from"./Button-287e2751.js";import{A as q}from"./Add-bf114621.js";import{A as M}from"./ArrowBack-568090f4.js";import{D as T,a as P,b as Y}from"./DialogContent-8a1e29b1.js";import{D as K}from"./DialogTitle-9058224f.js";import{T as s}from"./TableRow-96be2280.js";import{V as B}from"./Visibility-1d75f6de.js";import{E as R}from"./Edit-d3d63b61.js";import{P as x,S as g}from"./Stop-f781cdfc.js";import{a as h,C as E}from"./CheckCircle-e1eb6776.js";import{C as F}from"./Chip-0001e9bb.js";import"./createSvgIcon-5bc31cb8.js";import"./index-17fa150b.js";import"./Dropdown-4c3aabf3.js";import"./transition-92123e1c.js";import"./Cancel-a6a6eef9.js";import"./Edit-fc260d54.js";import"./TextField-552e66ea.js";import"./MenuItem-b79354fa.js";import"./DatePicker-b73dcf77.js";import"./Popper-aabbbbc2.js";import"./LastPage-76c05c1b.js";import"./SwitchBase-2ee5bbf3.js";import"./Checkbox-521167ff.js";import"./Stack-01e86631.js";import"./CircularProgress-210c747e.js";import"./Switch-3b9ccd2c.js";import"./Autocomplete-296c4901.js";const Ce=({auth:t,inventaires:l,departements:H,success:j,error:v})=>{const[C,c]=p.useState(!1),[u,y]=p.useState({action:"",id:null,message:""}),b=i=>{let r="default",a=null;switch(i){case"planifié":r="info",a=e.jsx(E,{fontSize:"small"});break;case"en_cours":r="warning",a=e.jsx(x,{fontSize:"small"});break;case"terminé":r="success",a=e.jsx(g,{fontSize:"small"});break;case"annulé":r="error",a=e.jsx(h,{fontSize:"small"});break;default:r="default"}return e.jsx(F,{label:i.charAt(0).toUpperCase()+i.slice(1),color:r,size:"small",icon:a})},d=(i,r,a)=>{y({action:i,id:r,message:a}),c(!0)},k=()=>{const{action:i,id:r}=u;switch(i){case"demarrer":n.get(route("admin.inventaire.physique.demarrer",[t.user.id,r]));break;case"terminer":n.get(route("admin.inventaire.physique.terminer",[t.user.id,r]));break;case"annuler":n.get(route("admin.inventaire.physique.annuler",[t.user.id,r]));break}c(!1)},S=z({columns:[{accessorKey:"id",header:"ID",size:80},{accessorKey:"date_debut",header:"Date de début",Cell:({row:i})=>f(i.original.date_debut).format("DD/MM/YYYY HH:mm")},{accessorKey:"date_fin",header:"Date de fin",Cell:({row:i})=>i.original.date_fin?f(i.original.date_fin).format("DD/MM/YYYY HH:mm"):"-"},{accessorKey:"departement.nom",header:"Département",Cell:({row:i})=>i.original.departement?i.original.departement.nom:"Tous les départements"},{accessorKey:"status",header:"Statut",Cell:({row:i})=>b(i.original.status)},{accessorKey:"user.name",header:"Créé par",Cell:({row:i})=>`${i.original.user.prenom} ${i.original.user.nom}`},{accessorKey:"actions",header:"Actions",Cell:({row:i})=>e.jsxs(A,{sx:{display:"flex",gap:"8px"},children:[e.jsx(s,{title:"Voir les détails",children:e.jsx(o,{color:"primary",onClick:()=>n.get(route("admin.inventaire.physique.show",[t.user.id,i.original.id])),children:e.jsx(B,{fontSize:"small"})})}),i.original.status==="planifié"&&e.jsxs(e.Fragment,{children:[e.jsx(s,{title:"Modifier",children:e.jsx(o,{color:"info",onClick:()=>n.get(route("admin.inventaire.physique.edit",[t.user.id,i.original.id])),children:e.jsx(R,{fontSize:"small"})})}),e.jsx(s,{title:"Démarrer l'inventaire",children:e.jsx(o,{color:"success",onClick:()=>d("demarrer",i.original.id,"Êtes-vous sûr de vouloir démarrer cet inventaire ?"),children:e.jsx(x,{fontSize:"small"})})}),e.jsx(s,{title:"Annuler l'inventaire",children:e.jsx(o,{color:"error",onClick:()=>d("annuler",i.original.id,"Êtes-vous sûr de vouloir annuler cet inventaire ?"),children:e.jsx(h,{fontSize:"small"})})})]}),i.original.status==="en_cours"&&e.jsx(s,{title:"Terminer l'inventaire",children:e.jsx(o,{color:"warning",onClick:()=>d("terminer",i.original.id,"Êtes-vous sûr de vouloir terminer cet inventaire ?"),children:e.jsx(g,{fontSize:"small"})})})]})}],data:l.data,enableColumnFilters:!0,enableGlobalFilter:!0,enablePagination:!0,manualPagination:!0,rowCount:l.total,onPaginationChange:i=>{n.get(route("admin.inventaire.physique.index",t.user.id),{page:i.pageIndex+1},{preserveState:!0,preserveScroll:!0,only:["inventaires"]})},state:{pagination:{pageIndex:l.current_page-1,pageSize:l.per_page}},localization:_,renderTopToolbarCustomActions:()=>e.jsx(m,{variant:"contained",color:"primary",startIcon:e.jsx(q,{}),onClick:()=>n.get(route("admin.inventaire.physique.create",t.user.id)),children:"Nouvel inventaire"})});return e.jsx(D,{auth:t,success:j,error:v,active:"stock",sousActive:"inventaire",breadcrumbs:[{text:"Inventaire",href:route("admin.stock.inventaire.index",[t.user.id]),active:!1},{text:"Inventaire Physique",href:route("admin.inventaire.physique.index",[t.user.id]),active:!0}],children:e.jsxs("div",{className:"p-4 bg-white rounded shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Inventaires Physiques"}),e.jsx(m,{variant:"outlined",startIcon:e.jsx(M,{}),onClick:()=>n.get(route("admin.stock.inventaire.index",t.user.id)),children:"Retour à la liste des inventaires"})]}),e.jsx(I,{table:S}),e.jsxs(T,{open:C,onClose:()=>c(!1),children:[e.jsx(K,{children:"Confirmation"}),e.jsx(P,{children:u.message}),e.jsxs(Y,{children:[e.jsx(m,{onClick:()=>c(!1),color:"error",children:"Annuler"}),e.jsx(m,{onClick:k,color:"primary",variant:"contained",children:"Confirmer"})]})]})]})})};export{Ce as default};
