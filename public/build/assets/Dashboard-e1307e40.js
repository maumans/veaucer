import{j as e,y as C}from"./app-80aef6d5.js";import{C as L,A as P,c as G,d as H,a as R,L as W,P as q,b as O,B as Q,p as U,D as J,e as K,f as X,I as Z,T as $}from"./index-c3408f19.js";import{d as m,P as ee,T as t,B as b,a as M,I as re}from"./PanelLayout-a81f80b5.js";import{f as h}from"./formatNumber-4d7c5d62.js";import{G as n}from"./Grid-f4fe8f5e.js";import{C as o,a as i}from"./CardContent-c6d9d8f3.js";import{B as te}from"./Button-1a27d212.js";import{e as B,f as D,g as S,c as j,b as s,d as k,T as se}from"./TableRow-8bf34bd7.js";import{V as ne}from"./Visibility-c61c2b57.js";import{S as oe}from"./SwapHoriz-be5e9d57.js";import{T as ie}from"./TrendingUp-d1801c8e.js";import"./createSvgIcon-f9f11e70.js";import"./index-bfd76f8c.js";import"./helpers.segment-8c19304b.js";import"./Dropdown-7e91de2b.js";import"./transition-c702c485.js";import"./Popper-3a932d0a.js";L.register(P,G,H,R,W,q,O,Q,U);const Ce=({auth:a,mouvementsParType:y,moisLabels:Y,montantData:N,topProduits:p,derniersMouvements:w,statsGenerales:c,mouvementsParDepartement:F})=>{const I={labels:y.map(r=>r.type),datasets:[{data:y.map(r=>r.total),backgroundColor:["#4CAF50","#F44336","#2196F3"],borderWidth:1}]},V={labels:Y,datasets:[{label:"Valeur des mouvements",data:N,fill:!1,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",tension:.4}]},A={labels:p.map(r=>r.nom),datasets:[{label:"Quantité totale",data:p.map(r=>r.quantite_totale),backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1},{label:"Nombre de mouvements",data:p.map(r=>r.nombre_mouvements),backgroundColor:"rgba(255, 159, 64, 0.6)",borderColor:"rgba(255, 159, 64, 1)",borderWidth:1}]},u={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}}},g=r=>{switch(r){case"entrée":return e.jsx(ie,{color:"success"});case"sortie":return e.jsx($,{color:"error"});case"transfert":return e.jsx(oe,{color:"primary"});default:return e.jsx(Z,{})}},z=()=>{C.get(route("admin.stock.mouvement.index",a.user.id))},E=r=>{C.get(route("admin.stock.mouvement.show",[a.user.id,r]))};return m.locale("fr"),e.jsx(ee,{auth:a,active:"stock",sousActive:"mouvement",breadcrumbs:[{text:"Mouvements",href:route("admin.stock.mouvement.index",a.user.id),active:!1},{text:"Tableau de bord",href:route("admin.stock.mouvement.dashboard",a.user.id),active:!0}],children:e.jsxs("div",{className:"p-4",children:[e.jsx(t,{variant:"h4",component:"h1",gutterBottom:!0,children:"Tableau de bord des mouvements de stock"}),e.jsxs(n,{container:!0,spacing:3,className:"mb-6",children:[e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(o,{children:e.jsxs(i,{children:[e.jsx(t,{color:"textSecondary",gutterBottom:!0,children:"Total des mouvements"}),e.jsx(t,{variant:"h4",component:"div",children:c.total_mouvements}),e.jsx(t,{variant:"body2",color:"textSecondary",children:"Tous types confondus"})]})})}),e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(o,{children:e.jsxs(i,{children:[e.jsx(t,{color:"textSecondary",gutterBottom:!0,children:"Valeur totale"}),e.jsxs(t,{variant:"h4",component:"div",children:[h(c.valeur_totale)," GNF"]}),e.jsx(t,{variant:"body2",color:"textSecondary",children:"Tous mouvements confondus"})]})})}),e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(o,{children:e.jsxs(i,{children:[e.jsx(t,{color:"textSecondary",gutterBottom:!0,children:"Mouvements ce mois"}),e.jsx(t,{variant:"h4",component:"div",children:c.mouvements_mois_courant}),e.jsx(t,{variant:"body2",color:"textSecondary",children:m().format("MMMM YYYY")})]})})}),e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(o,{children:e.jsxs(i,{children:[e.jsx(t,{color:"textSecondary",gutterBottom:!0,children:"Valeur ce mois"}),e.jsxs(t,{variant:"h4",component:"div",children:[h(c.valeur_mois_courant)," GNF"]}),e.jsx(t,{variant:"body2",color:"textSecondary",children:m().format("MMMM YYYY")})]})})})]}),e.jsxs(n,{container:!0,spacing:3,className:"mb-6",children:[e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(o,{children:e.jsxs(i,{children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Types de mouvements"}),e.jsx("div",{style:{height:"300px"},children:e.jsx(J,{data:I,options:u})})]})})}),e.jsx(n,{item:!0,xs:12,md:8,children:e.jsx(o,{children:e.jsxs(i,{children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Valeur des mouvements (6 derniers mois)"}),e.jsx("div",{style:{height:"300px"},children:e.jsx(K,{data:V,options:u})})]})})})]}),e.jsxs(n,{container:!0,spacing:3,className:"mb-6",children:[e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(o,{children:e.jsxs(i,{children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Top 5 des produits les plus mouvementés"}),e.jsx("div",{style:{height:"400px"},children:e.jsx(X,{data:A,options:u})})]})})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(o,{children:e.jsxs(i,{children:[e.jsxs(b,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(t,{variant:"h6",children:"Derniers mouvements"}),e.jsx(te,{variant:"outlined",size:"small",onClick:z,children:"Voir tous"})]}),e.jsx(B,{component:M,style:{maxHeight:"350px",overflow:"auto"},children:e.jsxs(D,{size:"small",children:[e.jsx(S,{children:e.jsxs(j,{children:[e.jsx(s,{children:"Type"}),e.jsx(s,{children:"Date"}),e.jsx(s,{children:"Montant"}),e.jsx(s,{children:"Détails"}),e.jsx(s,{children:"Actions"})]})}),e.jsx(k,{children:w.map(r=>{var x,l,d,v,f,T,_;return e.jsxs(j,{children:[e.jsx(s,{children:e.jsxs(b,{display:"flex",alignItems:"center",children:[g((x=r.type_operation)==null?void 0:x.nom),e.jsx(t,{variant:"body2",ml:1,children:(l=r.type_operation)==null?void 0:l.nom})]})}),e.jsx(s,{children:m(r.date).format("DD/MM/YYYY")}),e.jsxs(s,{children:[h(r.montant)," GNF"]}),e.jsxs(s,{children:[((d=r.type_operation)==null?void 0:d.nom)==="entrée"&&r.fournisseur&&e.jsxs(t,{variant:"body2",children:["De: ",r.fournisseur.nom]}),((v=r.type_operation)==null?void 0:v.nom)==="sortie"&&r.departement_source&&e.jsxs(t,{variant:"body2",children:["De: ",r.departement_source.nom]}),((f=r.type_operation)==null?void 0:f.nom)==="transfert"&&e.jsxs(t,{variant:"body2",children:[(T=r.departement_source)==null?void 0:T.nom," → ",(_=r.departement_destination)==null?void 0:_.nom]})]}),e.jsx(s,{children:e.jsx(se,{title:"Voir détails",children:e.jsx(re,{size:"small",onClick:()=>E(r.id),children:e.jsx(ne,{fontSize:"small"})})})})]},r.id)})})]})})]})})})]}),e.jsx(n,{container:!0,spacing:3,children:e.jsx(n,{item:!0,xs:12,children:e.jsx(o,{children:e.jsxs(i,{children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Mouvements par département"}),e.jsx(B,{component:M,children:e.jsxs(D,{children:[e.jsx(S,{children:e.jsxs(j,{children:[e.jsx(s,{children:"Type"}),e.jsx(s,{children:"Source"}),e.jsx(s,{children:"Destination"}),e.jsx(s,{children:"Nombre"}),e.jsx(s,{children:"Montant total"})]})}),e.jsx(k,{children:F.map((r,x)=>{var l,d;return e.jsxs(j,{children:[e.jsx(s,{children:e.jsxs(b,{display:"flex",alignItems:"center",children:[g((l=r.type_operation)==null?void 0:l.nom),e.jsx(t,{variant:"body2",ml:1,children:(d=r.type_operation)==null?void 0:d.nom})]})}),e.jsx(s,{children:r.source||"-"}),e.jsx(s,{children:r.destination||"-"}),e.jsx(s,{children:r.total}),e.jsxs(s,{children:[h(r.montant_total)," GNF"]})]},x)})})]})})]})})})})]})})};export{Ce as default};
