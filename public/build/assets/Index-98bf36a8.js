import{r as a,W as re,j as e,y as de}from"./app-2375f243.js";import"./PanelLayout-e7050e06.js";import{R as ue}from"./ReferentielLayout-7339f89f.js";import{u as me,D as h,a as x,b as f,c as S,C as ge,M as he}from"./index.esm-24e1cabb.js";import{V as xe,E as fe,D as pe,C as T,A as je,M as Ce}from"./index.esm-858d862c.js";import{I as c}from"./InputError-68d6cb0c.js";import{B as n}from"./Button-360edc97.js";import{T as r}from"./TextField-5b383e78.js";import"./createSvgIcon-ab9be74c.js";import"./index-c926b602.js";import"./Dropdown-1ce9c365.js";import"./transition-d812106d.js";/* empty css            */import"./Search-d7112b9b.js";function Me({auth:w,errors:i,referentiels:W,affections:d,error:A,success:B}){const[K,y]=a.useState([]),[k,E]=a.useState(!1),[L,p]=a.useState(!1),[P,m]=a.useState(!1),[V,D]=a.useState(0),[j,_]=a.useState([]),[C,G]=a.useState(""),[v,U]=a.useState([]),[o,q]=a.useState({pageIndex:d.current_page-1,pageSize:d.per_page});a.useEffect(()=>{D(d.total),y(d.data),m(!1)},[d]),a.useEffect(()=>{m(!0),p(!0),axios.post(route("superAdmin.affection.paginationFiltre"),{start:o.pageIndex*o.pageSize,size:o.pageSize,filters:j??[],globalFilter:C??"",sorting:v??[]}).then(s=>{y(s.data.data),D(s.data.rowCount),p(!1),m(!1)}).catch(s=>{E(!0),console.error(A)}),E(!1),p(!1),m(!1)},[j,C,o.pageIndex,o.pageSize,v]);const{data:t,setData:u,post:H,put:J,reset:b}=re({id:"",nom:"",code:"",slug:""}),[Q,g]=a.useState(!1),[X,N]=a.useState(!1),[Y,F]=a.useState(!1),[Z,z]=a.useState(!1),$=()=>{b(),g(!0)},I=()=>{g(!1)},R=()=>{N(!1)},ee=()=>{F(!1)},M=()=>{z(!1)},l=s=>{s.target.type==="checkbox"?u(s.target.name,s.target.checked):u(s.target.name,s.target.value)},se=()=>{H(route("superAdmin.affection.store"),{onSuccess:()=>{b(),g(!1)}})},ae=s=>{u({id:s.id,nom:s.nom||"",code:s.code||"",slug:s.slug||""}),N(!0)},te=s=>{u({id:s.id,nom:s.nom||"",code:s.code||"",slug:s.slug||""}),F(!0)},O=(s,ce)=>{u({id:s,message:ce}),z(!0)},ne=()=>{J(route("superAdmin.affection.update",t.id),{onSuccess:()=>{b(),N(!1)}})},ie=()=>{g(!1),de.delete(route("superAdmin.affection.destroy",{id:t.id}))},oe=a.useMemo(()=>[{accessorKey:"nom",header:"Nom"},{accessorKey:"code",header:"Code"},{accessorKey:"slug",header:"Slug"},{accessorKey:"status",header:"Status",Cell:({row:s})=>s.original.status?e.jsx("div",{className:"p-2 font-bold bg-green-500 text-white w-fit h-fit rounded",children:"Actif"}):e.jsx("div",{className:"p-2 font-bold bg-red-500 text-white w-fit h-fit rounded",children:"Inactif"})},{accessorKey:"action",header:"Action",Cell:({row:s})=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{onClick:()=>te(s.original),variant:"contained",size:"small",color:"info",children:e.jsx(xe,{})}),e.jsx(n,{onClick:()=>ae(s.original),variant:"contained",size:"small",color:"secondary",children:e.jsx(fe,{})}),s.original.status?e.jsx(n,{onClick:()=>O(s.original.id,"delete"),variant:"contained",size:"small",color:"error",children:e.jsx(pe,{})}):e.jsx(n,{onClick:()=>O(s.original.id,"check"),variant:"contained",size:"small",color:"success",children:e.jsx(T,{})})]},s.original.id)}],[]),le=me({columns:oe,data:K,getRowId:s=>s.id,initialState:{showColumnFilters:!1},manualFiltering:!0,manualPagination:!0,manualSorting:!0,muiToolbarAlertBannerProps:k?{color:"error",children:"Error loading data"}:void 0,onColumnFiltersChange:_,onGlobalFilterChange:G,onPaginationChange:q,onSortingChange:U,rowCount:V,state:{columnFilters:j,globalFilter:C,isLoading:L,pagination:o,showAlertBanner:k,showProgressBars:P,sorting:v},localization:Ce});return e.jsx(ue,{success:B,error:A,auth:w,errors:i,referentiels:W,referentiel:"Affections",active:"referentiel",sousActive:"superAdmin.affection.index",breadcrumbs:[{text:"Affection",href:route("superAdmin.affection.index",[w.user.id]),active:!1}],children:e.jsxs("div",{className:"grid gap-5 bg-gray-200 p-2 rounded border",children:[e.jsxs("div",{className:"flex justify-end",children:[e.jsxs(n,{color:"warning",variant:"contained",onClick:$,children:[e.jsx(je,{className:"mr-1"})," Ajout affection"]}),e.jsxs(h,{open:Q,onClose:I,children:[e.jsx(x,{className:"bg-orange-600 text-white",children:"Ajout de l'affection"}),e.jsx(f,{className:"space-y-5",children:e.jsxs("div",{className:"grid sm:grid-cols-2 grid-cols-1 bg-gray-50 gap-5 p-2 m-2 rounded",children:[e.jsxs("div",{children:[e.jsx(r,{value:t.nom,autoFocus:!0,id:"nom",name:"nom",label:"Nom",className:"bg-white",fullWidth:!0,onChange:l}),e.jsx(c,{message:i.nom,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{value:t.code,id:"code",name:"code",label:"Code",className:"bg-white",fullWidth:!0,onChange:l}),e.jsx(c,{message:i.code,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{value:t.slug,id:"slug",name:"slug",label:"Slug",className:"bg-white",fullWidth:!0,onChange:l}),e.jsx(c,{message:i.slug,className:"mt-2"})]})]})}),e.jsxs(S,{children:[e.jsx(n,{variant:"contained",color:"error",onClick:I,children:"Annuler"}),e.jsx(n,{variant:"contained",color:"success",onClick:se,children:"Enregistrer"})]})]}),e.jsxs(h,{open:X,onClose:R,children:[e.jsx(x,{className:"bg-orange-600 text-white",children:"Modification de l'affection"}),e.jsx(f,{className:"space-y-5",children:e.jsxs("div",{className:"grid sm:grid-cols-2 grid-cols-1 bg-gray-50 gap-5 p-2 m-2 rounded",children:[e.jsxs("div",{children:[e.jsx(r,{value:t.nom,autoFocus:!0,id:"nom",name:"nom",label:"Nom",className:"bg-white",fullWidth:!0,onChange:l}),e.jsx(c,{message:i.nom,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{value:t.code,id:"code",name:"Code",label:"Code",className:"bg-white",fullWidth:!0,onChange:l}),e.jsx(c,{message:i.code,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{value:t.slug,id:"slug",name:"slug",label:"Slug",className:"bg-white",fullWidth:!0,onChange:l}),e.jsx(c,{message:i.slug,className:"mt-2"})]})]})}),e.jsxs(S,{children:[e.jsx(n,{variant:"contained",color:"error",onClick:R,children:"Annuler"}),e.jsx(n,{variant:"contained",color:"success",onClick:ne,children:"Enregistrer"})]})]}),e.jsxs(h,{open:Y,onClose:ee,children:[e.jsx(x,{className:"bg-orange-600 text-white",children:"Details de l'affection"}),e.jsx(f,{className:"space-y-5",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 p-5 mt-5",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"CODE:"})," ",e.jsx("span",{children:" "+t.code})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"NOM:"})," ",e.jsx("span",{children:" "+t.nom})]}),t.slug!==""&&e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"SLUG:"})," ",e.jsx("span",{children:" "+t.slug})]})]})})]}),e.jsxs(h,{open:Z,onClose:M,children:[e.jsx(x,{className:"bg-orange-600 text-white",children:"Suppression du affection"}),e.jsx(f,{className:"space-y-5",children:e.jsxs("div",{className:"mt-5",children:[t.message==="delete"&&"Voulez-vous vraiment suspendre ce affection",t.message==="check"&&"Voulez-vous vraiment d√©bloquer ce affection"]})}),e.jsxs(S,{children:[e.jsxs(n,{variant:"contained",color:"error",onClick:M,children:[e.jsx(ge,{}),"  Non"]}),e.jsxs(n,{variant:"contained",color:"success",onClick:ie,children:[e.jsx(T,{})," Oui"]})]})]})]}),e.jsx(he,{table:le})]})})}export{Me as default};
