import{r as c,j as s,y as i}from"./app-ef847769.js";import{u as r,M as n}from"./index.esm-f651ad8d.js";import{M as o}from"./index.esm-4bae7fd4.js";import{P as v,d as N}from"./PanelLayout-f3b1b528.js";import{f as l}from"./formatNumber-4d7c5d62.js";import{B as u}from"./Button-5cd339f2.js";import"./createSvgIcon-1d15f18d.js";import"./index-63345e99.js";import"./Cancel-055cb859.js";import"./Edit-ed1cfcc7.js";import"./TableRow-e01d0199.js";import"./Popper-fafd03d0.js";import"./TextField-239b9d80.js";import"./MenuItem-7e314da3.js";import"./DatePicker-17c52b79.js";import"./DialogContent-21eccb4c.js";import"./Chip-7ba2869a.js";import"./LastPage-9a697fd0.js";import"./SwitchBase-300b33a4.js";import"./Checkbox-29e5b734.js";import"./Stack-d9f7e61f.js";import"./CircularProgress-9e4a82bd.js";import"./DialogTitle-8810badb.js";import"./Switch-00012cca.js";import"./Autocomplete-e3bbac74.js";import"./Dropdown-acf677e6.js";import"./transition-07c41afc.js";const J=({auth:d,operation:e})=>{var a,m;console.log("Operation reçue:",e);const h=c.useMemo(()=>[{accessorKey:"produit.nom",header:"Produit"},{accessorKey:"quantiteAchat",header:"Quantité"},{accessorKey:"prixAchat",header:"Prix d'achat",Cell:({cell:t})=>l(t.getValue())+" GNF"},{accessorKey:"total",header:"Total",Cell:({row:t})=>l(t.original.quantiteAchat*t.original.prixAchat)+" GNF"}],[]),x=c.useMemo(()=>[{accessorKey:"motif.nom",header:"Motif"},{accessorKey:"montant",header:"Montant",Cell:({cell:t})=>l(t.getValue())+" GNF"}],[]),b=r({columns:h,data:(e==null?void 0:e.produits)||[],localization:o,enableColumnFilters:!1,enableColumnActions:!1,enablePagination:!1,enableBottomToolbar:!1,enableTopToolbar:!0,initialState:{density:"compact",showColumnFilters:!1}}),f=r({columns:x,data:(e==null?void 0:e.depenses)||[],localization:o,enableColumnFilters:!1,enableColumnActions:!1,enablePagination:!1,enableBottomToolbar:!1,enableTopToolbar:!0,initialState:{density:"compact",showColumnFilters:!1}}),g=()=>{i.get(route("admin.stock.mouvement.index",d.user.id))},j=()=>{i.get(route("admin.stock.mouvement.edit",[d.user.id,e.id]))};return s.jsx(v,{auth:d,active:"stock",sousActive:"mouvement",breadcrumbs:[{text:"Mouvement",href:route("admin.stock.mouvement.index",d.user.id),active:!1},{text:"Détail",href:route("admin.stock.mouvement.show",[d.user.id,e.id]),active:!0}],children:s.jsx("div",{className:"grid gap-5 bg-gray-200 p-2 rounded border",children:s.jsxs("div",{className:"p-5 bg-white rounded",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("div",{className:"bg-black w-fit p-2 rounded text-xl font-bold text-white",children:s.jsx("h2",{children:"Détail du mouvement de stock"})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(u,{variant:"contained",color:"primary",onClick:j,children:"Modifier"}),s.jsx(u,{variant:"outlined",color:"secondary",onClick:g,children:"Retour"})]})]}),s.jsx("div",{className:"mt-5 space-y-8",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 bg-gray-100 p-4 rounded",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Date :"})," ",N(e==null?void 0:e.date).format("DD/MM/YYYY")]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Fournisseur :"})," ",((a=e==null?void 0:e.fournisseur)==null?void 0:a.nom)||"Non spécifié"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Type d'opération :"})," ",((m=e==null?void 0:e.typeOperation)==null?void 0:m.nom)||"Non spécifié"]}),(e==null?void 0:e.departementSource)&&s.jsxs("div",{children:[s.jsx("strong",{children:"Département source :"})," ",e.departementSource.nom]}),(e==null?void 0:e.departementDestination)&&s.jsxs("div",{children:[s.jsx("strong",{children:"Département destination :"})," ",e.departementDestination.nom]})]})}),s.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[s.jsx("h3",{className:"text-lg font-bold text-orange-500 mb-2",children:"Produits"}),s.jsx(n,{table:b}),e!=null&&e.totalCommande?s.jsx("div",{className:"mt-3 text-black font-bold bg-gray-200 p-2 rounded",children:"Total : "+l(e.totalCommande)+" GNF"}):""]}),(e==null?void 0:e.depenses)&&e.depenses.length>0&&s.jsxs("div",{className:"bg-white p-4 rounded shadow overflow-hidden",children:[s.jsx("h3",{className:"text-lg font-bold text-orange-500 mb-2",children:"Dépenses supplémentaires"}),s.jsx(n,{table:f}),e!=null&&e.totalDepense?s.jsx("div",{className:"mt-3 text-black font-bold bg-gray-200 p-2 rounded",children:"Total Dépenses : "+l(e.totalDepense)+" GNF"}):""]}),s.jsxs("div",{className:"mt-4 p-3 bg-black text-white font-bold rounded w-fit",children:["Total général : ",l(((e==null?void 0:e.totalCommande)||0)+((e==null?void 0:e.totalDepense)||0))," GNF"]})]})})})};export{J as default};
